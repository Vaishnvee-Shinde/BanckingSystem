import { Component, OnInit, ViewChild } from '@angular/core';
import { Chart, ChartConfiguration, ChartType } from 'chart.js';

@Component({
  selector: 'app-chart',
  template: `
    <div class="container mx-auto p-4">
      <canvas #chartCanvas></canvas>
      <div class="flex justify-center space-x-2 mt-4">
        <label class="inline-flex items-center" *ngFor="let dataset of chartData.datasets; let i = index">
          <input type="checkbox" [checked]="!dataset.hidden" (change)="toggleDataset(i)" class="form-checkbox">
          <span class="ml-2">{{dataset.label}}</span>
        </label>
      </div>
      <div class="mt-4">
        <button *ngFor="let type of chartTypes" (click)="changeChartType(type.id)" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
          {{type.title}}
        </button>
      </div>
    </div>
  `,
  styles: []
})
export class ChartComponent implements OnInit {
  @ViewChild('chartCanvas') chartCanvas: any;
  chart!: Chart;
  chartTypes: { id: ChartType, title: string }[] = [
    { id: 'line', title: 'Line' },
    { id: 'bar', title: 'Bar' },
    // Add other chart types as needed
  ];
  chartData = {
    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
    datasets: [
      {
        label: 'Dataset 1',
        data: [65, 59, 80, 81, 56, 55, 40],
        backgroundColor: 'rgba(255, 99, 132, 0.5)',
        borderColor: 'rgba(255, 99, 132, 1)',
        borderWidth: 1,
        hidden: false
      },
      // Add more datasets if needed
    ]
  };
  chartConfig: ChartConfiguration = {
    type: 'bar',
    data: this.chartData,
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  };

  ngOnInit(): void {}

  ngAfterViewInit(): void {
    this.chart = new Chart(this.chartCanvas.nativeElement, this.chartConfig);
  }

  toggleDataset(index: number): void {
    this.chartData.datasets[index].hidden = !this.chartData.datasets[index].hidden;
    this.chart.update();
  }

  changeChartType(newType: ChartType): void {
    this.chart.config.type = newType;
    this.chart.update();
  }
}





import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { ChartComponent } from './chart.component';

@NgModule({
  declarations: [
    ChartComponent
    // ... other components
  ],
  imports: [
    BrowserModule
    // ... other modules
  ],
  providers: [],
  bootstrap: [ChartComponent] // or your main component
})
export class AppModule { }
